<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>✦ Introduction to Fractals ✦</title>
<style>
  :root{
    --accent: #ffffff;
    --dark-trans: rgba(0,0,0,0.72);
    --color-primary: oklch(74% 0.15 32);
    --color-secondary: oklch(65% 0.13 210);
    --color-ui: oklch(65% 0.05 210);

    --color-yellow: oklch(80% 0.16 85);
    --color-green: oklch(60% 0.16 135);
    --color-red: oklch(65% 0.18 15);
    --color-green-2: oklch(54% 0.11 164);
    --color-purple: oklch(62% 0.15 318);
    --color-red-2: oklch(57% 0.2 15);
    --font-family-default: 'Times New Roman', Times, Georgia, Garamond, serif;
    --font-family-heading: 'Fraunces', Didot, 'Bodoni MT', 'Noto Serif Display', 'URW Palladio L', P052, Sylfaen, serif;
    --font-family-monospace: 'Nimbus Mono PS', 'Courier New', monospace;
  }

  html, body {
    height:100%;
    margin:0;
    font-family:var(--font-family-default);
    color:black;
    overflow-x: hidden;
    scroll-behavior: smooth;
  }

  header{
    text-align:center;
    padding:10vh 20vh;
    font-size:2.6rem;
    font-family:var(--font-family-heading);
    color:white;
    text-shadow:0 6px 18px rgba(0,0,0,0.6);
    position: relative;
    z-index: 2;
    animation: headerFadeIn 1.2s ease-out;
  }

  @keyframes headerFadeIn {
    from { opacity: 0; transform: translateY(-20px); }
    to { opacity: 1; transform: translateY(0); }
  }

  .subtitle {
    font-size: 1rem;
    font-family: var(--font-family-default);
    margin-top: 12px;
    opacity: 0.9;
    font-style: italic;
  }

  .background-container {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    overflow: hidden;
    z-index: -1;
  }

  .background-1, .background-2 {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    transition: opacity 2s ease;
    background-size: cover;
    background-position: center;
  }

  .background-overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: black;
    opacity: 0.5;
    z-index: 0;
    pointer-events: none;
    transition: opacity 0.3s ease;
  }

  .bubble-container{
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: calc(3vw + 20px);
    justify-content: center;
    align-items: start;
    width: 95%;
    min-height: calc(100vh - 120px);
    padding: 10vh 5vw;
    position: relative;
    z-index: 2;
  }

  .bubble{
    --size: 270px;
    width: var(--size);
    height: var(--size);
    border-radius:50%;
    background: var(--bubble-base);
    display: flex;
    align-items: center;
    justify-content: center;
    text-align: center;
    padding: 0;
    box-shadow:0 12px 26px rgba(0,0,0,0.45),
       inset -5px -5px 15px rgba(0,0,0,0.45),
       inset 5px 5px 15px rgba(25,50,120,0.259);
    cursor: pointer;
    transition: all .35s ease;
    overflow: hidden;
    position: relative;
    animation: blobMorph 10s ease-in-out infinite, bubbleColorShift 10s ease-in-out infinite alternate, bubbleEntrance 0.6s ease-out backwards;
  }
  
  @keyframes bubbleEntrance {
    from { opacity: 0; transform: scale(0.3); }
    to { opacity: 1; transform: scale(1); }
  }

  .bubble-container .bubble:nth-child(1){
    margin-top: 0vh; 
    animation-delay: 0s, 0s, 0.1s;
  }
  .bubble-container .bubble:nth-child(2){
    margin-top: 11vh;
    animation-delay: 0.7s, 0.7s, 0.25s;
  }
  .bubble-container .bubble:nth-child(3){
    margin-top: -2vh; 
    animation-delay: 1.4s, 1.4s, 0.4s;
  }
  .bubble-container .bubble:nth-child(4){
    margin-top: 8vh; 
    animation-delay: 2.1s, 2.1s, 0.55s;
  }
  
  @keyframes blobMorph{
    0%, 100% {border-radius: 45% 55% 60% 40% / 50% 40% 60% 50%; }
    33% {border-radius: 55% 45% 45% 55% / 60% 50% 40% 50%; }
    66% {border-radius: 40% 60% 50% 50% / 45% 55% 55% 45%; }
  }

  @keyframes bubbleColorShift{
    0% { background: var(--color-red);}
    14.3% { background: var(--color-primary);}
    28.6% { background: var(--color-yellow);}
    42.9% { background: var(--color-green);}
    57.2% { background: var(--color-green-2);}
    71.5% { background: var(--color-secondary);}
    85.8% { background: var(--color-purple);}
    100% { background: var(--color-red-2);}
  }

  .bubble:hover{ 
    transform: scale(1.08); 
    z-index:6;
    box-shadow:0 16px 36px rgba(0,0,0,0.55),
       inset -5px -5px 15px rgba(0,0,0,0.45),
       inset 5px 5px 15px rgba(25,50,120,0.259);
  }

  .bubble::before {
    content: '';
    position: absolute;
    top: 10%;
    left: 10%;
    width: 35%;
    height: 35%;
    background: radial-gradient(circle, rgba(255,255,255,0.4) 0%, transparent 70%);
    border-radius: 50%;
    opacity: 0;
    transition: opacity 0.3s ease;
  }

  .bubble:hover::before {
    opacity: 1;
  }

  .bubble h3{
    margin: 0;
    color: var(--accent);
    font-size: 1.05rem;
    line-height: 1.05;
    text-align: center;
    position: absolute;
    width: 100%;
    left: 50%;
    top: 50%;
    transform: translate(-50%, -50%);
    font-family:var(--font-family-heading);
    transition: all 0.3s ease;
  }

  .bubble:hover h3 {
    text-shadow: 0 2px 8px rgba(0,0,0,0.4);
  }

  .full-text{
    display:block;
    width:100%;
    max-height:0;
    opacity:0;
    overflow:auto;
    margin-top:12px;
    transition: max-height .45s ease, opacity .35s ease, transform .35s ease;
    transform: translateY(8px);
    color:#f7f7f7;
    text-align:left;
    line-height: 1.6;
    padding: 0 8px;
  }

  .full-text p {
    margin: 0 0 16px 0;
  }

  .full-text ul {
    margin: 12px 0;
    padding-left: 24px;
  }

  .full-text li {
    margin: 8px 0;
  }

  .full-text strong {
    color: rgba(255,255,255,0.95);
  }

  .bubble.expanded{
    position: fixed;
    margin: 0 !important;
    top: 50% !important;
    left: 50% !important;
    transform: translate(-50%, -50%) !important;
    width: min(800px, 85%);
    max-height: 80vh;
    height: auto;
    border-radius:16px !important;
    padding:32px;
    z-index:9999;
    box-shadow:0 30px 80px rgba(0,0,0,0.7), 0 0 0 2px rgba(255,255,255,0.1);
    display:flex;
    flex-direction:column;
    align-items:flex-start;
    justify-content:flex-start;
    animation: expandBubble 0.4s cubic-bezier(0.34, 1.56, 0.64, 1), expandedMorph 8s ease-in-out infinite, bubbleColorShift 10s ease-in-out infinite alternate;
    backdrop-filter: blur(10px);
  }

  @keyframes expandedMorph {
    0%, 100% { border-radius: 16px 18px 16px 18px; }
    25% { border-radius: 18px 16px 18px 16px; }
    50% { border-radius: 16px 18px 16px 18px; }
    75% { border-radius: 18px 16px 18px 16px; }
  }

  @keyframes expandBubble {
    from {
      transform: translate(-50%, -50%) scale(0.5);
      opacity: 0;
    }
    to {
      transform: translate(-50%, -50%) scale(1);
      opacity: 1;
    }
  }

  .bubble.expanded::before {
    opacity: 0;
  }

  .bubble.expanded h3{
    font-size:2rem;
    margin-bottom:18px;
    text-align: left;
    position: static;
    transform: none;
    left: auto;
    top: auto;
    width: 100%;
    text-shadow: 0 2px 12px rgba(0,0,0,0.5);
  }

  .bubble.expanded .full-text{
    max-height:calc(80vh - 120px);
    opacity:1;
    transform:translateY(0);
  }

  .close-btn{ 
    display: none;
    position:absolute; 
    top:16px; 
    right:16px; 
    background:rgba(0,0,0,0.6); 
    color:#fff; 
    border:1px solid rgba(255,255,255,0.15); 
    padding:8px 14px; 
    border-radius:50%; 
    cursor:pointer; 
    z-index:20; 
    font-family:inherit;
    font-size: 1.2rem;
    line-height: 1;
    width: 36px;
    height: 36px;
    align-items: center;
    justify-content: center;
    transition: all 0.2s ease;
    backdrop-filter: blur(8px);
    opacity: 0;
    pointer-events: none;
  }
  
  .bubble.expanded .close-btn {
    display: flex;
    opacity: 1;
    pointer-events: auto;
  }
  
  .close-btn:hover{ 
    background:var(--accent); 
    color:#000;
    transform: rotate(90deg) scale(1.1);
  }

  @media (max-width:700px){
    header { padding: 8vh 5vw; font-size: 2rem; }
    .bubble{ --size:140px; }
    .bubble.expanded{ 
      width:92vw; 
      max-height:85vh; 
      padding:24px; 
    }
    .bubble.expanded h3{ font-size:1.5rem; }
  }

  .nav{ 
    text-align:center; 
    padding:5vh 0; 
    z-index: 2; 
    position: relative;
  }
  
  .nav a{
    color:#fff; 
    text-decoration:none; 
    padding:12px 20px; 
    background:rgba(0,0,0,0.6); 
    border-radius:8px;
    transition: all .25s ease;
    display: inline-block;
    font-size: 1rem;
    backdrop-filter: blur(8px);
    border: 1px solid rgba(255,255,255,0.1);
  }
  
  .nav a:hover{ 
    background:var(--accent); 
    color:#000;
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(255,255,255,0.3);
  }

  /* Scrollbar styling */
  .full-text::-webkit-scrollbar {
    width: 8px;
  }

  .full-text::-webkit-scrollbar-track {
    background: rgba(0,0,0,0.2);
    border-radius: 4px;
  }

  .full-text::-webkit-scrollbar-thumb {
    background: rgba(255,255,255,0.3);
    border-radius: 4px;
  }

  .full-text::-webkit-scrollbar-thumb:hover {
    background: rgba(255,255,255,0.5);
  }

</style>
</head>
<body>

  <div id="background-container" class="background-container">
      <div id="background-1" class="background-1"></div>
      <div id="background-2" class="background-2"></div>
      <div class="background-overlay"></div>
  </div>

  <header>
    ✦ Introduction to Fractals ✦
  </header>

  <div class="bubble-container" id="bubbleContainer">
      <div class="bubble" aria-expanded="false" role="button" tabindex="0">
      <button class="close-btn" aria-label="Close" aria-hidden="true">✕</button>
      <h3>What is a Fractal?</h3>
      <div class="full-text" aria-hidden="true">
        <p>
          A <strong>fractal</strong> is a shape or pattern that exhibits <strong>self-similarity</strong>, meaning
          it repeats its structure at different scales. In other words, if you zoom in on a fractal, you'll often find
          the same patterns appearing again and again, sometimes infinitely. This remarkable property allows fractals
          to encode immense complexity using surprisingly simple rules.
        </p>
        <p>
          Fractals can be generated mathematically through <strong>iterative processes</strong>, where a simple
          function is applied repeatedly. One famous example is the <em>Mandelbrot set</em>, where the rule
          involves squaring complex numbers and checking whether the results "escape" to infinity. Despite its simple
          definition, the resulting set contains endless intricate detail, with new structures revealed at every scale.
        </p>
        <p>
          Beyond pure mathematics, fractal patterns are abundant in nature. These naturally occurring fractals
          arise from repeated processes that generate similar shapes over different scales, from microscopic structures
          to vast landscapes.
        </p>
      </div>
    </div>

    <div class="bubble" aria-expanded="false" role="button" tabindex="0">
      <button class="close-btn" aria-label="Close" aria-hidden="true">✕</button>
      <h3>Fractals in Nature</h3>
      <div class="full-text" aria-hidden="true">
        <p>Some natural phenomena that exhibit fractal patterns include:</p>
        <ul>
          <li><strong>Trees and plant branching:</strong> The branching of trees, veins in leaves, and roots all follow
              recursive, self-similar patterns.</li>
          <li><strong>Rivers and coastlines:</strong> Meandering rivers, jagged coastlines, and drainage networks display
              fractal-like irregularity at multiple scales.</li>
          <li><strong>Mountains, clouds, and snowflakes:</strong> Rough surfaces, cloud formations, and crystal growth
              often show repeating patterns that look similar whether viewed up close or from afar.</li>
          <li><strong>Seashells and hurricanes:</strong> Spirals and rotational patterns in shells or storm systems
              are governed by iterative growth rules, creating natural fractal shapes.</li>
        </ul>
        <p>
          By studying fractals in both mathematics and nature, we gain insight into how complexity arises from simplicity,
          and how similar principles can shape phenomena across vastly different scales.
        </p>
      </div>
    </div>

    <div class="bubble" aria-expanded="false" role="button" tabindex="0">
      <button class="close-btn" aria-label="Close" aria-hidden="true">✕</button>
      <h3>Abstract Fractals</h3>
      <div class="full-text" aria-hidden="true">
        <p>
          Abstract fractals are generated purely from mathematical rules, often involving <strong>complex numbers</strong>
          or geometric transformations. Unlike natural fractals, which arise from physical processes, abstract fractals exist
          as mathematical objects, yet they can produce stunningly intricate and visually striking patterns.
        </p>
        <p>
          Famous examples include the <em>Mandelbrot set</em> and <em>Julia sets</em>. In these cases, each point on the
          complex plane is tested by repeatedly applying a simple function — typically involving squaring the number and
          adding a constant — and observing whether the sequence remains bounded or escapes to infinity. The behavior
          of each point determines its color in the final image, revealing intricate boundary patterns with infinite
          detail.
        </p>
        <p>
          The rise of computers made it possible to visualize these sets with precision, creating the iconic
          fractal images that captured the imagination of mathematicians, artists, and the general public alike.
          What looks like chaotic complexity is actually the result of perfectly deterministic rules iterated
          thousands or millions of times.
        </p>
      </div>
    </div>

    <div class="bubble" aria-expanded="false" role="button" tabindex="0">
      <button class="close-btn" aria-label="Close" aria-hidden="true">✕</button>
      <h3>Key Characteristics</h3>
      <div class="full-text" aria-hidden="true">
        <ul>
          <li><strong>Self-Similarity</strong> — Patterns repeat at multiple scales; zooming in often reveals structures
              similar to the larger whole.</li>
          <li><strong>Infinite Detail</strong> — There is always more complexity to discover; no matter how far you zoom,
              new patterns emerge.</li>
          <li><strong>Recursive Generation</strong> — Fractals are built by iterating simple rules repeatedly, where
              the output of one step feeds into the next.</li>
          <li><strong>Fractal Dimension</strong> — Unlike ordinary geometric shapes, fractals often have non-integer
              dimensions, reflecting their intricate, space-filling complexity.</li>
        </ul>
        <p>
          Together, these characteristics make fractals a unique bridge between mathematics, nature, and art,
          offering a window into how simple rules can create infinitely rich structures.
        </p>
      </div>
    </div>
  </div>

  <div class="nav">
    <a href="index.html">◀ Home</a>
    &nbsp;&nbsp;
    <a href="history.html">History ➝</a>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/velocity/1.5.2/velocity.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/trianglify/3.0.0/trianglify.min.js"></script>

  <script>
    (function(){
      const bubbles = Array.from(document.querySelectorAll('.bubble'));
      
      function collapseAll(){
        bubbles.forEach(b => {
          b.classList.remove('expanded');
          b.setAttribute('aria-expanded','false');
          const txt = b.querySelector('.full-text');
          const cb = b.querySelector('.close-btn');
          if(txt) txt.setAttribute('aria-hidden','true');
          if(cb) cb.setAttribute('aria-hidden','true');
        });
      }
      
      document.addEventListener('click', e => { 
        if(!e.target.closest('.bubble')) collapseAll(); 
      });
      
      document.addEventListener('keydown', e => { 
        if(e.key==='Escape') collapseAll(); 
      });

      bubbles.forEach(bubble => {
        const fullText = bubble.querySelector('.full-text');
        const closeBtn = bubble.querySelector('.close-btn');
        
        const expandBubble = (ev) => {
          if(ev) ev.stopPropagation();
          if(bubble.classList.contains('expanded')) return;
          collapseAll();
          bubble.classList.add('expanded');
          bubble.setAttribute('aria-expanded','true');
          fullText.setAttribute('aria-hidden','false');
          if(closeBtn) closeBtn.setAttribute('aria-hidden','false');
        };
        
        bubble.addEventListener('click', expandBubble);
        
        bubble.addEventListener('keydown', (ev) => {
          if(ev.key === 'Enter' || ev.key === ' ') {
            ev.preventDefault();
            expandBubble(ev);
          }
        });
        
        if(closeBtn){
          closeBtn.addEventListener('click', ev => {
            ev.stopPropagation();
            bubble.classList.remove('expanded');
            bubble.setAttribute('aria-expanded','false');
            fullText.setAttribute('aria-hidden','true');
            closeBtn.setAttribute('aria-hidden','true');
          });
        }
      });
      
      collapseAll();
    })();

    $(document).ready(function(){
      const $bg1 = $('#background-1');
      const $bg2 = $('#background-2');
      let toggle = true;

      const colorPalettes = [
          ["#000000", "#1a1a1a", "#333333", "#4d4d4d", "#666666", "#808080", "#999999", "#b3b3b3", "#cccccc"],
          ["#0f0f0f", "#262626", "#404040", "#595959", "#737373", "#8c8c8c", "#a6a6a6", "#bfbfbf"],
          ["#050505", "#1f1f1f", "#353535", "#4a4a4a", "#5f5f5f", "#757575", "#8a8a8a", "#9f9f9f"],
          ["#0a0a0a", "#222222", "#3a3a3a", "#525252", "#6b6b6b", "#838383", "#9c9c9c", "#b5b5b5"],
          ["#111111", "#2a2a2a", "#434343", "#5c5c5c", "#757575", "#8e8e8e", "#a7a7a7", "#c0c0c0"]
      ];
     
      let paletteIndex = 0;

      function shuffleArray(array) {
          const shuffled = [...array];
          for (let i = shuffled.length - 1; i > 0; i--) {
              const j = Math.floor(Math.random() * (i + 1));
              [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
          }
          return shuffled;
      }

      function createPattern() {
          const width = $(window).width();
          const height = $(window).height();
          const shuffledPalette = shuffleArray(colorPalettes[paletteIndex]);
          const cellSize = 80 + Math.random() * 120;
          const variance = 0.8 + Math.random() * 1.4;

          return Trianglify({
              width: width,
              height: height,
              cell_size: cellSize,  
              variance: variance,
              x_colors: shuffledPalette,
              y_colors: shuffleArray([...shuffledPalette])
          });
      }

      function setBackground($el, pattern) {
          const svgEl = pattern.svg(); 
          const serializer = new XMLSerializer();
          const svgString = serializer.serializeToString(svgEl);
          const svgData = encodeURIComponent(svgString);
          $el.css({
              'background-image': 'url("data:image/svg+xml;utf8,' + svgData + '")',
              'background-size': 'cover',
              'opacity': 0.9
          });
      }

      function fadeBackgrounds() {
          const pattern1 = createPattern();
          paletteIndex = (paletteIndex + 1) % colorPalettes.length;
          const pattern2 = createPattern();

          if (toggle) {
              setBackground($bg1, pattern1);
              $bg1.velocity("fadeIn", {duration: 3000});
              $bg2.velocity("fadeOut", {duration: 5000});
          } else {
              setBackground($bg2, pattern2);
              $bg2.velocity("fadeIn", {duration: 3000});
              $bg1.velocity("fadeOut", {duration: 5000});
          }
          toggle = !toggle;
          paletteIndex = (paletteIndex + 1) % colorPalettes.length;
      }

      fadeBackgrounds();
      setInterval(fadeBackgrounds, 7000);
      $(window).resize(fadeBackgrounds);
    });
  </script>
</body>
</html>