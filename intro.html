<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>✦ Introduction to Fractals ✦</title>
<style>
  :root{
    --accent: #2efbfe;
    --dark-trans: rgba(0,0,0,0.72);
  }

  html,body {
    height:100%;
    margin:0;
    font-family:"Times New Roman",serif;
    background: linear-gradient(120deg,#ff4d4d,#4d79ff,#33cc33);
    background-size:400% 400%;
    animation:gradientShift 15s linear infinite;color:#eee;
 }

  @keyframes blobMorph{
    0%,100%{border-radius: 45% 55% 60% 40% / 50% 40% 60% 50%; }
    33%{border-radius: 55% 45% 45% 55% / 60% 50% 40% 50%; }
    66% { border-radius: 40% 60% 50% 50% / 45% 55% 55% 45%; }
  }
  .bubble {
    animation: bloMorph 10s ease-in-out infinite;
  }

  header{
    text-align:center;
    padding:36px 20px 6px;
    font-size:2.6rem;
    color:#fff;
    text-shadow:0 6px 18px rgba(0,0,0,0.6);
  }

  /* bubble area */
  .bubble-container{
    box-sizing:border-box;
    width:100%;
    min-height:calc(100vh - 120px);
    display:flex;
    flex-wrap:wrap;
    justify-content:center;
    align-items:center;
    gap:28px;
    padding:28px;
    position:relative;
  }

  .bubble{
    --size:200px;
    width:var(--size);
    height:var(--size);
    border-radius:50%;
    background:var(--dark-trans);
    display: flex;
    align-items: center;
    justify-content: center;
    text-align: center;
    padding: 18px;
    box-shadow:0 12px 26px rgba(0,0,0,0.45);
    cursor:pointer;
    transition: all .35s ease;
    overflow:hidden;
    position:relative;
    
    border-radius: 45% 55% 60% 40% / 50% 40% 60% 50%;
  }

  .bubble:hover{ transform: scale(1.08); z-index:6; }

  .bubble h3{
    margin:0;
    color:var(--accent);
    font-size:1.05rem;
    line-height:1.05;
    padding:0 8px;
  }

  .full-text{
    display:block;
    width:100%;
    max-height:0;
    opacity:0;
    overflow:auto;
    margin-top:12px;
    transition: max-height .45s ease, opacity .35s ease, transform .35s ease;
    transform: translateY(8px);
    color:#f7f7f7;
    text-align:left;
  }
  .full-text p, .full-text ul { margin:0 0 1rem 0; padding-left:1.1rem; }
  .full-text ul { list-style: disc; }

  .close-btn{
    display:none;
    position:absolute;
    top:12px;
    right:12px;
    background:#111;
    color:#fff;
    border:1px solid rgba(255,255,255,0.06);
    padding:8px 10px;
    border-radius:6px;
    cursor:pointer;
    z-index:20;
    font-family:inherit;
  }
  .close-btn:hover{ background:var(--accent); color:#000; }

  .bubble.expanded{
    position:fixed;
    top:50%;
    left:50%;
    transform:translate(-50%,-50%);
    width:86vw;
    height:74vh;
    border-radius:12px;
    padding:28px;
    z-index:9999;
    box-shadow:0 30px 80px rgba(0,0,0,0.6);
    transition: transform .28s cubic-bezier(.2,.9,.2,1), width .38s cubic-bezier(.2,.9,.2,1), height .38s cubic-bezier(.2,.9,.2,1), border-radius .38s;
    display:flex;
    flex-direction:column;
    align-items:flex-start;
    justify-content:flex-start;
  }

  .bubble.expanded h3{
    font-size:1.9rem;
    align-self:flex-start;
    margin-bottom:12px;
  }
  .bubble.expanded .full-text{
    max-height:60vh;
    opacity:1;
    transform:translateY(0);
  }
  .bubble.expanded .close-btn{ display:block; }

  @media (max-width:700px){
    .bubble{ --size:140px; }
    .bubble.expanded{ width:92vw; height:78vh; padding:18px; }
    .bubble.expanded h3{ font-size:1.4rem; }
  }

  .nav{ text-align:center; padding:14px 0 28px; }
  .nav a{
    color:#fff; text-decoration:none; padding:10px 16px; background:rgba(0,0,0,0.55); border-radius:8px;
    transition: background .2s;
  }
  .nav a:hover{ background:var(--accent); color:#000; }

</style>
</head>
<body>

<header>✦ Introduction to Fractals ✦</header>
<div class="bubble-container" id="bubbleContainer">

  <div class="bubble" aria-expanded="false">
    <button class="close-btn" aria-hidden="true">✕</button>
    <h3>What is a Fractal?</h3>
    <div class="full-text" aria-hidden="true">
      <p>
        A <strong>fractal</strong> is a shape or pattern that repeats its structure at different scales — a property
        called <strong>self-similarity</strong>. Fractals are generated by repeating simple rules and often reveal
        infinite complexity from compact formulas.
      </p>
      <p>
        They can be produced by iterative mathematical functions (like the Mandelbrot iteration) or appear in nature
        where the same branching or roughness patterns repeat at multiple scales.
      </p>
    </div>
  </div>

  <div class="bubble" aria-expanded="false">
    <button class="close-btn" aria-hidden="true">✕</button>
    <h3>Fractals in Nature</h3>
    <div class="full-text" aria-hidden="true">
      <p>Natural examples where fractal patterns appear:</p>
      <ul>
        <li>Trees and plant branching</li>
        <li>Rivers and coastlines (meandering complexity)</li>
        <li>Mountains, clouds and snowflakes</li>
        <li>Seashell patterns and hurricanes</li>
      </ul>
    </div>
  </div>

  <div class="bubble" aria-expanded="false">
    <button class="close-btn" aria-hidden="true">✕</button>
    <h3>Abstract Fractals</h3>
    <div class="full-text" aria-hidden="true">
      <p>
        Abstract fractals are produced by repeating mathematical rules on complex numbers or geometric transforms.
        The Mandelbrot set and Julia sets are canonical examples — you compute an iteration for each point and color
        according to the iteration behavior.
      </p>
      <p>
        Computers allowed these sets to be visualized, producing the iconic “infinite detail” images that popularized fractals.
      </p>
    </div>
  </div>

  <div class="bubble" aria-expanded="false">
    <button class="close-btn" aria-hidden="true">✕</button>
    <h3>Key Characteristics</h3>
    <div class="full-text" aria-hidden="true">
      <ul>
        <li><strong>Self-Similarity</strong> — repeated structure at different scales</li>
        <li><strong>Infinite Detail</strong> — more structure appears as you zoom</li>
        <li><strong>Recursive Generation</strong> — built by iterating rules</li>
        <li><strong>Fractal Dimension</strong> — often non-integer dimension</li>
      </ul>
    </div>
  </div>

</div>

<div class="nav">
  <a href="index.html">◀ Home</a>
  &nbsp;&nbsp;
  <a href="history.html">History ➝</a>
</div>

<script>
  // safe, defensive JS — no assumptions about malformed elements
  (function(){
    const bubbles = Array.from(document.querySelectorAll('.bubble'));

    function collapseAll(){
      bubbles.forEach(b => {
        b.classList.remove('expanded');
        b.setAttribute('aria-expanded','false');
        const txt = b.querySelector('.full-text');
        const cb = b.querySelector('.close-btn');
        if(txt) { txt.setAttribute('aria-hidden','true'); }
        if(cb) { cb.setAttribute('aria-hidden','true'); }
      });
    }

    // clicking outside any bubble collapses
    document.addEventListener('click', (e) => {
      if (!e.target.closest('.bubble')) collapseAll();
    });

    // keyboard ESC closes
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') collapseAll();
    });

    bubbles.forEach(bubble => {
      const fullText = bubble.querySelector('.full-text');
      const closeBtn = bubble.querySelector('.close-btn');

      // guard: ensure elements exist
      if (!fullText) return;

      // Expand on bubble click
      bubble.addEventListener('click', (ev) => {
        ev.stopPropagation(); // prevent document.click handler
        // if already expanded do nothing (user should click X to close)
        if (bubble.classList.contains('expanded')) return;

        collapseAll();
        bubble.classList.add('expanded');
        bubble.setAttribute('aria-expanded','true');
        fullText.setAttribute('aria-hidden','false');
        if (closeBtn) closeBtn.setAttribute('aria-hidden','false');
      });

      // close button
      if (closeBtn){
        closeBtn.addEventListener('click', (ev) => {
          ev.stopPropagation();
          bubble.classList.remove('expanded');
          bubble.setAttribute('aria-expanded','false');
          fullText.setAttribute('aria-hidden','true');
          closeBtn.setAttribute('aria-hidden','true');
        });
      }
    });

    // start collapsed
    collapseAll();
  })();
</script>
</body>
</html>
